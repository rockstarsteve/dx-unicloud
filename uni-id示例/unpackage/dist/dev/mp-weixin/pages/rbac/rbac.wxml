<view class="content"><view class="tips">考虑到性能，登录操作时传入参数needPermission: true时，checkToken时才会返回Permission，否则只会返回role。Permission一般用于管理后台</view><button type="default" data-event-opts="{{[['tap',[['addPermission',['$event']]]]]}}" bindtap="__e">新增权限</button><button type="default" data-event-opts="{{[['tap',[['addRole',['$event']]]]]}}" bindtap="__e">新增角色</button><view class="role-permission"><scroll-view class="role-scroll" scroll-y="true"><view>角色列表</view><checkbox-group data-event-opts="{{[['change',[['roleChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index"><view data-event-opts="{{[['tap',[['selectRole',[index]]]]]}}" class="{{['role-item',(currentRoleIndex===index)?'act':'']}}" bindtap="__e"><checkbox value="{{item.$orig.role_id}}" checked="{{item.g0>-1}}"></checkbox><text>{{item.$orig.role_name}}</text></view></block></checkbox-group></scroll-view><scroll-view class="permission-scroll" scroll-y="true"><view>权限列表</view><checkbox-group data-event-opts="{{[['change',[['permissionChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index"><view class="permission-item"><checkbox value="{{item.$orig.permission_id}}" checked="{{item.g1>-1}}"></checkbox><text>{{item.$orig.permission_name}}</text></view></block></checkbox-group></scroll-view></view><button type="default" data-event-opts="{{[['tap',[['bindRole',['$event']]]]]}}" bindtap="__e">为用户绑定角色</button><button type="default" data-event-opts="{{[['tap',[['bindPermission',['$event']]]]]}}" bindtap="__e">为角色绑定权限</button></view>